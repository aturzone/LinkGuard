<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkGuard -- Blocked</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Inter, Roboto, sans-serif;
            background: #0B1120;
            color: #F1F5F9;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            -webkit-font-smoothing: antialiased;
        }
        .container {
            max-width: 520px;
            width: 90%;
            text-align: center;
        }
        .shield-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 24px;
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.9; }
        }
        h1 {
            font-size: 28px;
            font-weight: 800;
            color: #EF4444;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }
        .subtitle {
            font-size: 15px;
            color: #94A3B8;
            margin-bottom: 32px;
            line-height: 1.5;
        }
        .score-card {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            background: #111827;
            border: 1px solid #1E293B;
            border-radius: 16px;
            padding: 28px 48px;
            margin-bottom: 24px;
        }
        .score-ring {
            position: relative;
            width: 100px;
            height: 100px;
            margin-bottom: 8px;
        }
        .score-ring svg {
            width: 100px;
            height: 100px;
            transform: rotate(-90deg);
        }
        .ring-bg {
            fill: none;
            stroke: #1E293B;
            stroke-width: 8;
        }
        .ring-fill {
            fill: none;
            stroke: #EF4444;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.8s ease;
        }
        .score-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 28px;
            font-weight: 800;
            color: #EF4444;
        }
        .score-label {
            font-size: 12px;
            color: #64748B;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        .url-card {
            background: #111827;
            border: 1px solid #1E293B;
            padding: 14px 20px;
            border-radius: 10px;
            font-family: "SF Mono", "Fira Code", "Fira Mono", Menlo, monospace;
            font-size: 13px;
            word-break: break-all;
            color: #94A3B8;
            margin-bottom: 32px;
            text-align: left;
            max-height: 80px;
            overflow-y: auto;
        }
        .actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }
        .btn {
            padding: 12px 32px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.15s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn:hover { transform: translateY(-1px); }
        .btn:active { transform: translateY(0); }
        .btn-back {
            background: #22C55E;
            color: #fff;
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
        }
        .btn-back:hover {
            background: #16A34A;
            box-shadow: 0 6px 16px rgba(34, 197, 94, 0.4);
        }
        .btn-proceed {
            background: transparent;
            border: 1px solid #334155;
            color: #64748B;
        }
        .btn-proceed:hover {
            border-color: #475569;
            color: #94A3B8;
        }
        .btn-proceed.hidden { display: none; }
        .branding {
            margin-top: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 12px;
            color: #475569;
        }
        .branding svg {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="shield-icon">
            <svg viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M256 28C256 28 56 100 56 100C56 100 56 300 56 300C56 420 256 492 256 492C256 492 456 420 456 420C456 300 456 100 456 100C456 100 256 28 256 28Z" fill="#EF4444" opacity="0.15"/>
                <path d="M256 28C256 28 56 100 56 100C56 100 56 300 56 300C56 420 256 492 256 492C256 492 456 420 456 420C456 300 456 100 456 100C456 100 256 28 256 28Z" stroke="#EF4444" stroke-width="24" fill="none"/>
                <line x1="180" y1="180" x2="332" y2="332" stroke="#EF4444" stroke-width="36" stroke-linecap="round"/>
                <line x1="332" y1="180" x2="180" y2="332" stroke="#EF4444" stroke-width="36" stroke-linecap="round"/>
            </svg>
        </div>
        <h1>Link Blocked</h1>
        <p class="subtitle">LinkGuard detected a potentially dangerous URL.<br>This link scored below the safety threshold.</p>

        <div class="score-card">
            <div class="score-ring">
                <svg viewBox="0 0 100 100">
                    <circle class="ring-bg" cx="50" cy="50" r="42"/>
                    <circle class="ring-fill" cx="50" cy="50" r="42"
                        stroke-dasharray="263.9"
                        stroke-dashoffset="263.9"
                        id="score-ring-fill"/>
                </svg>
                <span class="score-text" id="score-value">0%</span>
            </div>
            <div class="score-label">Safety Score</div>
        </div>

        <div class="url-card" id="url-display"></div>

        <div class="actions">
            <button class="btn btn-back" id="go-back">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"/></svg>
                Go Back to Safety
            </button>
            <button class="btn btn-proceed hidden" id="proceed">Proceed Anyway</button>
        </div>

        <div class="branding">
            <svg viewBox="0 0 512 512" fill="none"><path d="M256 28C256 28 56 100 56 100C56 100 56 300 56 300C56 420 256 492 256 492C256 492 456 420 456 420C456 300 456 100 456 100C456 100 256 28 256 28Z" fill="#3B82F6"/><path d="M200 260L240 300L320 210" stroke="white" stroke-width="36" stroke-linecap="round" stroke-linejoin="round"/></svg>
            LinkGuard &mdash; Open Source Link Safety
        </div>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const blockedUrl = params.get("url") || "";
        const score = parseInt(params.get("score") || "0", 10);
        const bypassAllowed = params.get("bypass") === "true";

        document.getElementById("score-value").textContent = score + "%";
        document.getElementById("url-display").textContent = blockedUrl;

        // Animate score ring
        const circumference = 2 * Math.PI * 42;
        const offset = circumference - (score / 100) * circumference;
        const ringFill = document.getElementById("score-ring-fill");
        ringFill.style.strokeDasharray = circumference;
        setTimeout(function() {
            ringFill.style.strokeDashoffset = offset;
        }, 100);

        // Color based on score
        if (score >= 40) {
            ringFill.style.stroke = "#EAB308";
            document.getElementById("score-value").style.color = "#EAB308";
        }

        if (bypassAllowed) {
            document.getElementById("proceed").classList.remove("hidden");
        }

        document.getElementById("go-back").addEventListener("click", function() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                window.close();
            }
        });

        document.getElementById("proceed").addEventListener("click", function() {
            window.location.href = blockedUrl;
        });
    </script>
</body>
</html>
